version: '3'
services:
  root-config:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "9000:9000"
    depends_on:
      - angular-mfe
      - react-mfe
    volumes:
      - .:/app
      - node_modules:/app/node_modules 
    restart: always

  angular-mfe:
    build:
      context: ./angular-mfe
      dockerfile: Dockerfile
    ports:
      - "8081:8081"
    volumes:
      - ./angular-mfe:/app
      - node_modules_angular:/app/node_modules 
    restart: always

  react-mfe:
    build:
      context: ./react-mfe
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    volumes:
      - ./react-mfe:/app
      - node_modules_react:/app/node_modules 
    restart: always

volumes:
  node_modules:
  node_modules_angular:
  node_modules_react:
